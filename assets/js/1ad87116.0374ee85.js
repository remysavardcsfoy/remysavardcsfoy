"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[686],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),l=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(i.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),m=l(n),k=r,g=m["".concat(i,".").concat(k)]||m[k]||d[k]||o;return n?a.createElement(g,s(s({ref:t},c),{},{components:n})):a.createElement(g,s({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=k;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[m]="string"==typeof e?e:r,s[1]=p;for(var l=2;l<o;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},5367:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>p,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={title:"Lab 18: HTTP GET"},s=void 0,p={unversionedId:"labs/js/HTTP-GET",id:"labs/js/HTTP-GET",title:"Lab 18: HTTP GET",description:"Objectives",source:"@site/docs/labs/js/18-HTTP-GET.md",sourceDirName:"labs/js",slug:"/labs/js/HTTP-GET",permalink:"/docs/labs/js/HTTP-GET",draft:!1,tags:[],version:"current",sidebarPosition:18,frontMatter:{title:"Lab 18: HTTP GET"}},i={},l=[{value:"Objectives",id:"objectives",level:2},{value:"Steps",id:"steps",level:2},{value:"Create an API object that loads data from an REST API",id:"create-an-api-object-that-loads-data-from-an-rest-api",level:3},{value:"Update a component to use the API object",id:"update-a-component-to-use-the-api-object",level:3},{value:"Add Pagination",id:"add-pagination",level:3},{value:"\u2714 You have completed the Lab 18",id:"-you-have-completed-the-lab-18",level:3}],c={toc:l},m="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"objectives"},"Objectives"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Create an API object that loads data from an REST API"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Update a component to use the API object"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Add Pagination")),(0,r.kt)("h2",{id:"steps"},"Steps"),(0,r.kt)("h3",{id:"create-an-api-object-that-loads-data-from-an-rest-api"},"Create an API object that loads data from an REST API"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create the file ",(0,r.kt)("inlineCode",{parentName:"p"},"src\\projects\\projectAPI.js"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a ",(0,r.kt)("inlineCode",{parentName:"p"},"projectAPI")," object and export it from the file.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Implement a ",(0,r.kt)("inlineCode",{parentName:"p"},"get")," method that requires ",(0,r.kt)("inlineCode",{parentName:"p"},"page")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"limit")," parameters and sets the default to ",(0,r.kt)("inlineCode",{parentName:"p"},"page = 1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"limit=20"),".\nThe projects should be sorted by name."),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/typicode/json-server/blob/master/README.md"},"json-server ")," supports sorting and paging using the following syntax.")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"`${url}?_page=${page}&_limit=${limit}&_sort=name`;\n")),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectapijs"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\projectAPI.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},'import { Project } from "./Project";\n\nconst baseUrl = "http://localhost:4000";\nconst url = `${baseUrl}/projects`;\n\nfunction translateStatusToErrorMessage(status) {\n  switch (status) {\n    case 401:\n      return "Please login again.";\n    case 403:\n      return "You do not have permission to view the project(s).";\n    default:\n      return "There was an error retrieving the project(s). Please try again.";\n  }\n}\n\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    const httpErrorInfo = {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.url,\n    };\n    console.log(`log server http error: ${JSON.stringify(httpErrorInfo)}`);\n\n    let errorMessage = translateStatusToErrorMessage(httpErrorInfo.status);\n    throw new Error(errorMessage);\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\n// eslint-disable-next-line\nfunction delay(ms) {\n  return function (x) {\n    return new Promise((resolve) => setTimeout(() => resolve(x), ms));\n  };\n}\n\nconst projectAPI = {\n  get(page = 1, limit = 20) {\n    return fetch(`${url}?_page=${page}&_limit=${limit}&_sort=name`)\n      .then(delay(600))\n      .then(checkStatus)\n      .then(parseJSON)\n      .then((projects) => {\n        return projects.map((p) => {\n          return new Project(p);\n        });\n      })\n      .catch((error) => {\n        console.log("log client error " + error);\n        throw new Error(\n          "There was an error retrieving the projects. Please try again."\n        );\n      });\n  },\n};\n\nexport { projectAPI };\n')))),(0,r.kt)("h3",{id:"update-a-component-to-use-the-api-object"},"Update a component to use the API object"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Open")," the file ",(0,r.kt)("inlineCode",{parentName:"p"},"src\\projects\\ProjectsPage.js"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Use")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," function to create two additonal state variables ",(0,r.kt)("inlineCode",{parentName:"p"},"loading")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"error"),"."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"...\n function ProjectsPage() {\n   const [projects, setProjects] = useState(MOCK_PROJECTS);\n+  const [loading, setLoading] = useState(false);\n+  const [error, setError] = useState(undefined);\n...\n}\n")),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"DO NOT DELETE")," the file ",(0,r.kt)("inlineCode",{parentName:"p"},"src\\projects\\MockProjects.js"),". We will use it in our unit testing."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Change")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"projects")," ",(0,r.kt)("strong",{parentName:"p"},"state")," to be an empty array ",(0,r.kt)("inlineCode",{parentName:"p"},"[]")," ",(0,r.kt)("strong",{parentName:"p"},"(be sure to remove the mock data)"),"."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"- import { Project } from './Project';\n- import { MOCK_PROJECTS } from './MockProjects';\n...\n function ProjectsPage() {\n-  const [projects, setProjects] = useState(MOCK_PROJECTS);\n+  const [projects, setProjects] = useState([]);\n   const [loading, setLoading] = useState(false);\n   const [error, setError] = useState(undefined);\n...\n}\n...\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Implement")," the loading of the data from the API after the intial component render in a ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," hook. Follow these specifications."),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Set")," state of ",(0,r.kt)("inlineCode",{parentName:"li"},"loading")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"true")),(0,r.kt)("li",{parentName:"ol"},"Call the API: ",(0,r.kt)("inlineCode",{parentName:"li"},"projectAPI.get(1)"),"."),(0,r.kt)("li",{parentName:"ol"},"If ",(0,r.kt)("strong",{parentName:"li"},"successful"),", ",(0,r.kt)("strong",{parentName:"li"},"set")," the returned ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," into the components ",(0,r.kt)("inlineCode",{parentName:"li"},"projects")," state variable and set the ",(0,r.kt)("inlineCode",{parentName:"li"},"loading")," state variable to ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,r.kt)("li",{parentName:"ol"},"If an ",(0,r.kt)("strong",{parentName:"li"},"error occurs"),", ",(0,r.kt)("strong",{parentName:"li"},"set")," the returned error's message ",(0,r.kt)("inlineCode",{parentName:"li"},"error.message")," to the components ",(0,r.kt)("inlineCode",{parentName:"li"},"error")," state and ",(0,r.kt)("inlineCode",{parentName:"li"},"loading")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),".")),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"import React, { Fragment, useState,\n+ useEffect } from 'react';\n+ import { projectAPI } from './projectAPI';\n\nfunction ProjectsPage() {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(undefined);\n\n// Approach 1: using promise then\n//  useEffect(() => {\n//    setLoading(true);\n//    projectAPI\n//      .get(1)\n//      .then((data) => {\n//        setError(null);\n//        setLoading(false);\n//        setProjects(data);\n//      })\n//      .catch((e) => {\n//        setLoading(false);\n//        setError(e.message);\n//      });\n//  }, []);\n\n // Approach 2: using async/await\n+  useEffect(() => {\n+    async function loadProjects() {\n+      setLoading(true);\n+      try {\n+        const data = await projectAPI.get(1);\n+        setError(null);\n+        setProjects(data);\n+      } catch (e) {\n+        setError(e.message);\n+      } finally {\n+        setLoading(false);\n+      }\n+    }\n+    loadProjects();\n+  }, []);\n\n...\n}\n...\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Display")," the ",(0,r.kt)("strong",{parentName:"p"},"loading")," indicator ",(0,r.kt)("strong",{parentName:"p"},"below")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"<ProjectList />"),". Only display the indicator when ",(0,r.kt)("inlineCode",{parentName:"p"},"loading=true"),"."),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"If you want to try it yourself first before looking at the solution code use the ",(0,r.kt)("inlineCode",{parentName:"p"},"HTML")," snippet below to format the loading indicator.")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<div class="center-page">\n  <span class="spinner primary"></span>\n  <p>Loading...</p>\n</div>\n')),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-3"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'function ProjectsPage() {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(undefined);\n\n  ...\n\n  return (\n    <Fragment>\n      <h1>Projects</h1>\n\n      <ProjectList onSave={saveProject} projects={projects} />\n\n+      {loading && (\n+        <div className="center-page">\n+          <span className="spinner primary"></span>\n+          <p>Loading...</p>\n+        </div>\n+      )}\n    </Fragment>\n  );\n}\n\nexport default ProjectsPage;\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add these ",(0,r.kt)("inlineCode",{parentName:"p"},"CSS")," styles to center the loading indicator on the page."),(0,r.kt)("h4",{parentName:"li",id:"srcindexcss"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\index.css")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"... //add below existing styles\n\nhtml,\nbody,\n#root,\n.container,\n.center-page {\n  height: 100%;\n}\n\n.center-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Display")," the ",(0,r.kt)("strong",{parentName:"p"},"error")," message ",(0,r.kt)("strong",{parentName:"p"},"above")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"<ProjectList />")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"HTML")," snippet below. Only display the indicator when ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," is defined."),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"If you want to try it yourself first before looking at the solution code use the ",(0,r.kt)("inlineCode",{parentName:"p"},"HTML")," snippet below to format the error.")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<div class="row">\n  <div class="card large error">\n    <section>\n      <p>\n        <span class="icon-alert inverse "></span>\n        {error}\n      </p>\n    </section>\n  </div>\n</div>\n')),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-4"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'function ProjectsPage() {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(undefined);\n\n  ...\n\n  return (\n  <>\n      <h1>Projects</h1>\n\n+      {error && (\n+        <div className="row">\n+          <div className="card large error">\n+            <section>\n+              <p>\n+                <span className="icon-alert inverse "></span>\n+                {error}\n+              </p>\n+            </section>\n+          </div>\n+        </div>\n+      )}\n\n      <ProjectList onSave={saveProject} projects={projects} />\n\n      {loading && (\n        <div className="center-page">\n          <span className="spinner primary"></span>\n          <p>Loading...</p>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default ProjectsPage;\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Verify")," the application is working by ",(0,r.kt)("strong",{parentName:"p"},"following these steps")," in your ",(0,r.kt)("inlineCode",{parentName:"p"},"Chrome")," ",(0,r.kt)("strong",{parentName:"p"},"browser"),"."),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Open")," the application on ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Open")," ",(0,r.kt)("inlineCode",{parentName:"p"},"Chrome DevTools"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Refresh")," the page.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"For a brief second, a ",(0,r.kt)("strong",{parentName:"p"},"loading indicator")," should ",(0,r.kt)("strong",{parentName:"p"},"appear"),".\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1474579/65072299-9a46df80-d95e-11e9-9c74-8fd89814bbe2.png",alt:"image"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Then, a list of ",(0,r.kt)("strong",{parentName:"p"},"projects")," should ",(0,r.kt)("strong",{parentName:"p"},"appear"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Click")," on the ",(0,r.kt)("inlineCode",{parentName:"p"},"Chrome DevTools")," ",(0,r.kt)("inlineCode",{parentName:"p"},"Network")," tab.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Verify")," the ",(0,r.kt)("strong",{parentName:"p"},"request")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"/projects?_page=1&_limit=20&_sort=name")," is happening.\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1474579/65073227-6ff62180-d960-11e9-8073-51597f20cda2.png",alt:"image"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"We are using a ",(0,r.kt)("inlineCode",{parentName:"p"},"delay")," function in ",(0,r.kt)("inlineCode",{parentName:"p"},"projectAPI.get()")," to delay the returning of data so it is easier to see the loading indicator. You can remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"delay")," at this point."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectapijs-1"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\projectAPI.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"return fetch(`${url}?_page=${page}&_limit=${limit}&_sort=name`)\n- .then(delay(600))\n  .then(checkStatus)\n  .then(parseJSON);\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Change")," the ",(0,r.kt)("strong",{parentName:"p"},"URL")," so the API endpoint cannot be reached."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectapijs-2"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\projectAPI.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"const baseUrl = 'http://localhost:4000';\n- const url = `${baseUrl}/projects`;\n+ const url = `${baseUrl}/fail`;\n...\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In your browser, you should see the following ",(0,r.kt)("strong",{parentName:"p"},"error message")," ",(0,r.kt)("strong",{parentName:"p"},"displayed"),".\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1474579/65073355-b51a5380-d960-11e9-9d62-d26616574d83.png",alt:"image"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Fix")," the ",(0,r.kt)("strong",{parentName:"p"},"URL")," to the backend API before continuing to the next lab."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectapijs-3"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\projectAPI.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"...\nconst baseUrl = 'http://localhost:4000';\n+ const url = `${baseUrl}/projects`;\n- const url = `${baseUrl}/fail`;\n...\n")))))),(0,r.kt)("h3",{id:"add-pagination"},"Add Pagination"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Use")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," function to create an additonal state variable ",(0,r.kt)("inlineCode",{parentName:"p"},"currentPage"),"."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-5"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"...\nfunction ProjectsPage() {\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(undefined);\n+ const [currentPage, setCurrentPage] = useState(1);\n  ...\n}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Update")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," method to make ",(0,r.kt)("inlineCode",{parentName:"p"},"currentPage")," a dependency and use it when fetching the data."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-6"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"...\nfunction ProjectsPage() {\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(undefined);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    async function loadProjects() {\n      setLoading(true);\n      try {\n-        const data = await projectAPI.get(1);\n+        const data = await projectAPI.get(currentPage);\n-        setProjects(data);\n+      if (currentPage === 1) {\n+          setProjects(data);\n+        } else {\n+          setProjects((projects) => [...projects, ...data]);\n+        }\n      } catch (e) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n    loadProjects();\n-  }, []);\n+  }, [currentPage]);\n...\n}\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Implement")," a ",(0,r.kt)("inlineCode",{parentName:"p"},"handleMoreClick")," event handler and implement it by incrementing the page and then calling ",(0,r.kt)("inlineCode",{parentName:"p"},"loadProjects"),"."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-7"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"...\nfunction ProjectsPage() {\n  ...\n  const [currentPage, setCurrentPage] = useState(1);\n  ...\n\n+  const handleMoreClick = () => {\n+    setCurrentPage((currentPage) => currentPage + 1);\n+  };\n  ...\n}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add a ",(0,r.kt)("inlineCode",{parentName:"p"},"More...")," button below the ",(0,r.kt)("inlineCode",{parentName:"p"},"<ProjectList />")," . Display the ",(0,r.kt)("inlineCode",{parentName:"p"},"More...")," button only when not ",(0,r.kt)("inlineCode",{parentName:"p"},"loading")," and there is not an ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," and handle the ",(0,r.kt)("inlineCode",{parentName:"p"},"More...")," button's ",(0,r.kt)("inlineCode",{parentName:"p"},"click")," event and call ",(0,r.kt)("inlineCode",{parentName:"p"},"handleMoreClick"),"."),(0,r.kt)("h4",{parentName:"li",id:"srcprojectsprojectspagejs-8"},(0,r.kt)("inlineCode",{parentName:"h4"},"src\\projects\\ProjectsPage.js")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'...\nfunction ProjectsPage() {\n...\n\n  return (\n    <Fragment>\n      <h1>Projects</h1>\n      {error && (\n        <div className="row">\n          <div className="card large error">\n            <section>\n              <p>\n                <span className="icon-alert inverse "></span>\n                {error}\n              </p>\n            </section>\n          </div>\n        </div>\n      )}\n      <ProjectList onSave={saveProject} projects={projects} />\n\n+      {!loading && !error && (\n+        <div className="row">\n+          <div className="col-sm-12">\n+            <div className="button-group fluid">\n+              <button className="button default" onClick={handleMoreClick}>\n+                More...\n+              </button>\n+            </div>\n+          </div>\n+        </div>\n+      )}\n\n      {loading && (\n        <div className="center-page">\n          <span className="spinner primary"></span>\n          <p>Loading...</p>\n        </div>\n      )}\n    </Fragment>\n  );\n}\n\nexport default ProjectsPage;\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Verify")," the application is working by ",(0,r.kt)("strong",{parentName:"p"},"following these steps")," in your ",(0,r.kt)("strong",{parentName:"p"},"browser"),"."),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Refresh")," the page."),(0,r.kt)("li",{parentName:"ol"},"A list of ",(0,r.kt)("strong",{parentName:"li"},"projects")," should ",(0,r.kt)("strong",{parentName:"li"},"appear"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Click")," on the ",(0,r.kt)("inlineCode",{parentName:"li"},"More...")," ",(0,r.kt)("strong",{parentName:"li"},"button"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Verify")," that 20 additional projects are appended to the end of the list."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Click")," on the ",(0,r.kt)("inlineCode",{parentName:"li"},"More...")," ",(0,r.kt)("strong",{parentName:"li"},"button")," again."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Verify")," that another 20 projects are appended to the end of the list.")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1474579/65072105-391f0c00-d95e-11e9-9e22-922fd0154b2a.png",alt:"image"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1474579/65072105-391f0c00-d95e-11e9-9e22-922fd0154b2a.png",alt:"image"})))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"-you-have-completed-the-lab-18"},"\u2714"," You have completed the Lab 18"))}d.isMDXComponent=!0}}]);