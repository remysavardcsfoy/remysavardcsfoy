"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[9195],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=s(n),f=r,m=u["".concat(c,".").concat(f)]||u[f]||p[f]||o;return n?a.createElement(m,l(l({ref:t},d),{},{components:n})):a.createElement(m,l({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=f;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},1576:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const o={id:"SideEffectsLifecyle",title:"Side Effects & Lifecyle",sidebar_label:"Side Effects & Lifecyle",slug:"/side-effects-lifecyle"},l=void 0,i={unversionedId:"SideEffectsLifecyle",id:"SideEffectsLifecyle",title:"Side Effects & Lifecyle",description:"Side Effects (in function components)",source:"@site/docs/09-SideEffectsLifecycle.md",sourceDirName:".",slug:"/side-effects-lifecyle",permalink:"/docs/side-effects-lifecyle",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{id:"SideEffectsLifecyle",title:"Side Effects & Lifecyle",sidebar_label:"Side Effects & Lifecyle",slug:"/side-effects-lifecyle"}},c={},s=[{value:"Side Effects (in function components)",id:"side-effects-in-function-components",level:2},{value:"useEffect",id:"useeffect",level:3},{value:"What does useEffect do?",id:"what-does-useeffect-do",level:3},{value:"Using useEffect",id:"using-useeffect",level:3},{value:"Example (after first render only)",id:"example-after-first-render-only",level:3},{value:"Example (after first render AND subsequent renders caused by a change in a dependency)",id:"example-after-first-render-and-subsequent-renders-caused-by-a-change-in-a-dependency",level:3},{value:"useEffect Cleanup Example",id:"useeffect-cleanup-example",level:3},{value:"Lifecycle (in class components)",id:"lifecycle-in-class-components",level:2},{value:"What are Lifecycle Methods",id:"what-are-lifecycle-methods",level:3},{value:"React Lifecycle Methods Diagram: Common Methods",id:"react-lifecycle-methods-diagram-common-methods",level:4},{value:"Using LifeCycle Methods",id:"using-lifecycle-methods",level:3},{value:"Reference",id:"reference",level:3}],d={toc:s},u="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"side-effects-in-function-components"},"Side Effects (in function components)"),(0,r.kt)("p",null,"Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects. Whether or not you\u2019re used to calling these operations \u201cside effects\u201d (or just \u201ceffects\u201d), you\u2019ve likely performed them in your components before."),(0,r.kt)("h3",{id:"useeffect"},"useEffect"),(0,r.kt)("p",null,"This Hook should be used for any side-effects you\u2019re executing in your render cycle."),(0,r.kt)("h3",{id:"what-does-useeffect-do"},"What does useEffect do?"),(0,r.kt)("p",null,"By using this Hook, you tell React that your component needs to do something after render. React will remember the function you passed (we'll refer to it as our \u201ceffect\u201d), and call it later after performing the DOM updates."),(0,r.kt)("h3",{id:"using-useeffect"},"Using useEffect"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useEffect()")," ",(0,r.kt)("em",{parentName:"p"},"takes")," a ",(0,r.kt)("inlineCode",{parentName:"p"},"function")," as an input and ",(0,r.kt)("em",{parentName:"p"},"returns")," ",(0,r.kt)("inlineCode",{parentName:"p"},"nothing"),"."),(0,r.kt)("p",null,"The function it takes will be executed for you:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"after the render cycle"),(0,r.kt)("li",{parentName:"ul"},"after ",(0,r.kt)("em",{parentName:"li"},"every")," render cycle")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Lifecycle Methods"),(0,r.kt)("th",{parentName:"tr",align:null},"Hook"),(0,r.kt)("th",{parentName:"tr",align:null},"Renders"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"componentDidMount"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"useEffect(()=>{ ... }"),", ","[ ]",")"),(0,r.kt)("td",{parentName:"tr",align:null},"after first render only")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"componentDidUpdate"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"useEffect(()=>{... }, [dependency1, dependency2])")),(0,r.kt)("td",{parentName:"tr",align:null},"after first render AND subsequent renders caused by a change in a dependency")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"componentWillUnmount"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"useEffect(() => { ... return ()=> {...cleanup}})")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shouldComponentUpdate"),(0,r.kt)("td",{parentName:"tr",align:null},"no comparable hook, instead, wrap function component in ",(0,r.kt)("inlineCode",{parentName:"td"},"React.memo(List)")),(0,r.kt)("td",{parentName:"tr",align:null},"renders only if a prop changes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"componentWillMount"),(0,r.kt)("td",{parentName:"tr",align:null},"deprecated so no comparable hook"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"componentWillUpdate"),(0,r.kt)("td",{parentName:"tr",align:null},"deprecated so no comparable hook"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h3",{id:"example-after-first-render-only"},"Example (after first render only)"),(0,r.kt)("p",null,"Here is the the common use case example we saw in the state section. It has been updated to loadData after the initial rendering of the component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { useState, useEffect } = React;\n\nfunction App() {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState(null);\n  function loadData() {\n    setLoading(true);\n    setTimeout(() => {\n      setLoading(false);\n      setData([1, 2, 3, 4, 5]);\n    }, 1000);\n  }\n\n  useEffect(loadData, []);\n\n  return (\n    <>\n      {loading && <p>Loading...</p>}\n      {data && <pre>{JSON.stringify(data, null, 1)}</pre>}\n    </>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,r.kt)("h3",{id:"example-after-first-render-and-subsequent-renders-caused-by-a-change-in-a-dependency"},"Example (after first render AND subsequent renders caused by a change in a dependency)"),(0,r.kt)("p",null,"Here is the the common use case example we saw in the state section. It has been updated to loadData after the initial rendering of the component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { useState, useEffect } = React;\n\nfunction App() {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState(null);\n  const [page, setPage] = useState(1);\n  function loadData() {\n    setLoading(true);\n    setTimeout(() => {\n      setLoading(false);\n      if (page === 1) {\n        setData([1, 2, 3, 4, 5]);\n      } else if (page === 2) {\n        setData([6, 7, 8, 9, 10]);\n      } else {\n        setData(null);\n      }\n    }, 1000);\n  }\n\n  useEffect(loadData, [page]);\n\n  function handleNext() {\n    setPage((currentPage) => currentPage + 1);\n  }\n\n  return (\n    <>\n      {loading && <p>Loading...</p>}\n      {data && <pre>{JSON.stringify(data, null, 1)}</pre>}\n      <span>Current Page: {page}</span>\n      <button onClick={handleNext}>Next</button>\n    </>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,r.kt)("h3",{id:"useeffect-cleanup-example"},"useEffect Cleanup Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function Clock() {\n  const [time, setTime] = React.useState(new Date().toLocaleTimeString());\n\n  React.useEffect(() => {\n    const timerID = setInterval(refresh, 1000);\n    return () => {\n      clearInterval(timerID);\n    };\n  }, []);\n\n  const refresh = () => {\n    setTime(new Date().toLocaleTimeString());\n  };\n\n  return (\n    <div>\n      <p>{time}</p>\n    </div>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<Clock />);\n")),(0,r.kt)("h2",{id:"lifecycle-in-class-components"},"Lifecycle (in class components)"),(0,r.kt)("h3",{id:"what-are-lifecycle-methods"},"What are Lifecycle Methods"),(0,r.kt)("p",null,"Lifecycle methods are custom functionality that gets executed during the different phases of a component. There are methods available when the component gets created and inserted into the DOM (mounting), when the component updates, and when the component gets unmounted or removed from the DOM."),(0,r.kt)("blockquote",null,(0,r.kt)("h2",{parentName:"blockquote",id:"understanding-mounting"},"Understanding Mounting"),(0,r.kt)("p",{parentName:"blockquote"},"The main job of React is to figure out how to modify the DOM to match what the components want to be rendered on the screen."),(0,r.kt)("p",{parentName:"blockquote"},'React does so by "mounting" (adding nodes to the DOM), "unmounting" (removing them from the DOM), and "updating" (making changes to nodes already in the DOM).'),(0,r.kt)("p",{parentName:"blockquote"},"This process of creating instances and DOM nodes corresponding to React components, and inserting them into the DOM, is called mounting.")),(0,r.kt)("h4",{id:"react-lifecycle-methods-diagram-common-methods"},"React Lifecycle Methods Diagram: Common Methods"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Here is an interactive version that links to the documentation for each method: ",(0,r.kt)("a",{parentName:"p",href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"},"React Lifecycle Methods Diagram"))),(0,r.kt)("h3",{id:"using-lifecycle-methods"},"Using LifeCycle Methods"),(0,r.kt)("p",null,"In applications with many components, it\u2019s very important to free up resources taken by the components when they are destroyed."),(0,r.kt)("p",null,"We want to set up a timer whenever the Clock is rendered to the DOM for the first time. This is called \u201cmounting\u201d in React."),(0,r.kt)("p",null,"We also want to clear that timer whenever the DOM produced by the Clock is removed. This is called \u201cunmounting\u201d in React."),(0,r.kt)("p",null,"We can declare special methods on the component class to run some code - when a component mounts : - set up a timer to refresh the clock every second - when a component unmounts: - tear down the timer when the component is removed to prevent a memory leak"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"class Clock extends React.Component {\n  state = {\n    time: new Date().toLocaleTimeString(),\n  };\n\n  refresh = () => {\n    this.setState({ time: new Date().toLocaleTimeString() });\n  };\n\n  render() {\n    return (\n      <div>\n        <p>{this.state.time}</p>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(this.refresh, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<Clock />);\n")),(0,r.kt)("h3",{id:"reference"},"Reference"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"},"React Lifecycle Methods Diagram")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/glossary.html#lifecycle-methods"},"Glossary: Lifecycle Methods")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/31556450/what-is-mounting-in-react-js/31559566#31559566"},"What is Mounting?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/38759703/when-to-use-react-componentdidupdate-method#:~:text=The%20componentDidUpdate%20is%20particularly%20useful,last%20thing%20to%20be%20executed."},"componentDidUpdate Examples")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html"},"Deprecated Lifecycle Methods")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://blog.devgenius.io/how-to-use-react-clean-up-function-with-example-7a073392e479"},"useEffect Diagram"))))}p.isMDXComponent=!0}}]);