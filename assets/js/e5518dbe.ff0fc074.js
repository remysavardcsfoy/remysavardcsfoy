"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[2520],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>h});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),m=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=m(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),p=m(t),c=o,h=p["".concat(s,".").concat(c)]||p[c]||d[c]||l;return t?a.createElement(h,i(i({ref:n},u),{},{components:t})):a.createElement(h,i({ref:n},u))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,i=new Array(l);i[0]=c;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[p]="string"==typeof e?e:o,i[1]=r;for(var m=2;m<l;m++)i[m]=t[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},1743:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>r,toc:()=>m});var a=t(7462),o=(t(7294),t(3905));const l={title:"Forms",sidebar_label:"Forms",slug:"/forms"},i=void 0,r={unversionedId:"Forms",id:"Forms",title:"Forms",description:"Controlled Components",source:"@site/docs/13-Forms.md",sourceDirName:".",slug:"/forms",permalink:"/docs/forms",draft:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"Forms",sidebar_label:"Forms",slug:"/forms"}},s={},m=[{value:"Controlled Components",id:"controlled-components",level:2},{value:"Controlled <strong>Function</strong> Components",id:"controlled-function-components",level:3},{value:"Controlled <strong>Class</strong> Components",id:"controlled-class-components",level:3},{value:"Submitting",id:"submitting",level:2},{value:"Function Component Example",id:"function-component-example",level:3},{value:"Class Component Example",id:"class-component-example",level:3},{value:"Controlling other Types of HTML Form Elements",id:"controlling-other-types-of-html-form-elements",level:2},{value:"Function Component Example",id:"function-component-example-1",level:3},{value:"Class Component Example",id:"class-component-example-1",level:3},{value:"Validation",id:"validation",level:2},{value:"Validation (with Function Component &amp; Hooks)",id:"validation-with-function-component--hooks",level:3},{value:"styles.css",id:"stylescss",level:4},{value:"index.html",id:"indexhtml",level:4},{value:"main.js",id:"mainjs",level:4},{value:"Validation (in a Class Component)",id:"validation-in-a-class-component",level:3},{value:"main.js",id:"mainjs-1",level:4},{value:"Uncontrolled Components",id:"uncontrolled-components",level:2},{value:"Refs",id:"refs",level:3},{value:"Function Component Example",id:"function-component-example-2",level:3},{value:"Setting defaultValue",id:"setting-defaultvalue",level:4},{value:"Class Component Example",id:"class-component-example-2",level:3},{value:"File Input Example",id:"file-input-example",level:3},{value:"Function Component Example",id:"function-component-example-3",level:4},{value:"Class Component Example",id:"class-component-example-3",level:4},{value:"Items App Demo (CRUD) (continued)",id:"items-app-demo-crud-continued",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Solution (using Function Components &amp; Hooks)",id:"solution-using-function-components--hooks",level:3},{value:"styles.css",id:"stylescss-1",level:4},{value:"index.html",id:"indexhtml-1",level:4},{value:"main.js",id:"mainjs-2",level:4},{value:"Solution (using Class Components)",id:"solution-using-class-components",level:3},{value:"styles.css",id:"stylescss-2",level:4},{value:"index.html",id:"indexhtml-2",level:4},{value:"main.js",id:"mainjs-3",level:4},{value:"Reference",id:"reference",level:2}],u={toc:m},p="wrapper";function d(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"controlled-components"},"Controlled Components"),(0,o.kt)("p",null,"In HTML, form elements such as ",(0,o.kt)("inlineCode",{parentName:"p"},"<input>"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"<textarea>"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"<select>")," typically maintain their own state and update it based on user input."),(0,o.kt)("p",null,"For example, if you type in a text input the value property of the element holds what you typed (controls it)."),(0,o.kt)("p",null,"In React, mutable state is typically kept in the state property of components, and only updated with setState()."),(0,o.kt)("p",null,"We can combine the two by making the React state be the \u201csingle source of truth\u201d. Then the React component that renders a form also controls what happens in that form on subsequent user input. An input form element whose value is controlled by React in this way is called a ",(0,o.kt)("strong",{parentName:"p"},"controlled component"),"."),(0,o.kt)("h3",{id:"controlled-function-components"},"Controlled ",(0,o.kt)("strong",{parentName:"h3"},"Function")," Components"),(0,o.kt)("p",null,"Below is an example of what a controlled component would like like in a function component."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Delete the current code in ",(0,o.kt)("inlineCode",{parentName:"li"},"main.js"),"."),(0,o.kt)("li",{parentName:"ol"},"Add the following code to ",(0,o.kt)("inlineCode",{parentName:"li"},"main.js"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ExampleForm() {\n  const [value, setValue] = React.useState('');\n\n  const handleChange = (event) => {\n    setValue(event.target.value);\n  };\n\n  return (\n    <form>\n      <input type=\"text\" value={value} onChange={handleChange} />\n      <pre>{value}</pre>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<ExampleForm />);\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Refresh your browser"),(0,o.kt)("li",{parentName:"ol"},"Type some text in the ",(0,o.kt)("inlineCode",{parentName:"li"},"input")),(0,o.kt)("li",{parentName:"ol"},"Notice that this text immediately shows in ",(0,o.kt)("inlineCode",{parentName:"li"},"state")," because we have written set the value and onChange properties to read and write from the parent component's surrounding state."),(0,o.kt)("li",{parentName:"ol"},"Update ",(0,o.kt)("inlineCode",{parentName:"li"},"handleChange")," as follows")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"  const handleChange = (event) => {\n    setValue(event.target.value\n+    .toUpperCase()\n    );\n  };\n")),(0,o.kt)("ol",{start:7},(0,o.kt)("li",{parentName:"ol"},"Refresh the browser"),(0,o.kt)("li",{parentName:"ol"},"Type some text in the ",(0,o.kt)("inlineCode",{parentName:"li"},"input")),(0,o.kt)("li",{parentName:"ol"},"We can now more clearly see we are controlling the value by storing it in the component's state."),(0,o.kt)("li",{parentName:"ol"},"Remove the ",(0,o.kt)("inlineCode",{parentName:"li"},"toUpperCase()")," call"),(0,o.kt)("li",{parentName:"ol"},"To further understand controlled components: Comment out the implementation of ",(0,o.kt)("inlineCode",{parentName:"li"},"handleChange")," and notice that when you type in the input nothing happens.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"  const handleChange = (event) => {\n-    setValue(event.target.value);\n  };\n")),(0,o.kt)("ol",{start:12},(0,o.kt)("li",{parentName:"ol"},"Uncomment the ",(0,o.kt)("inlineCode",{parentName:"li"},"handleChange")," implementation and verify it is working again.")),(0,o.kt)("h3",{id:"controlled-class-components"},"Controlled ",(0,o.kt)("strong",{parentName:"h3"},"Class")," Components"),(0,o.kt)("p",null,"Below is an example of what a controlled component would look like in a class component."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"class ExampleForm extends React.Component {\n  state = {\n    value: '',\n  };\n\n  handleChange = (event) => {\n    this.setState({ value: event.target.value });\n  };\n\n  render() {\n    return (\n      <form>\n        <input\n          type=\"text\"\n          value={this.state.value}\n          onChange={this.handleChange}\n        />\n        <pre>{JSON.stringify(this.state)}</pre>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<ExampleForm />);\n")),(0,o.kt)("h2",{id:"submitting"},"Submitting"),(0,o.kt)("p",null,"Handling the submission of the form using the same concepts we learning previously in the events section."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Modify the code to prevent the default browser behavior of submitting the form data to the server and instead log the form data to the ",(0,o.kt)("inlineCode",{parentName:"li"},"console"),".")),(0,o.kt)("h3",{id:"function-component-example"},"Function Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'function SigninForm() {\n  const [username, setUsername] = React.useState(\'\');\n  const [password, setPassword] = React.useState(\'\');\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(username, password);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type="text"\n        name="username"\n        value={username}\n        onChange={(event) => setUsername(event.target.value)}\n      />\n      <input\n        type="password"\n        name="password"\n        value={password}\n        onChange={(event) => setPassword(event.target.value)}\n      />\n      <button type="submit">Sign In</button>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<SigninForm />);\n')),(0,o.kt)("h3",{id:"class-component-example"},"Class Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'class LoginForm extends React.Component {\n  state = {\n    username: \'\',\n    password: \'\',\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(this.state);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input\n          type="text"\n          name="username"\n          value={this.state.username}\n          onChange={this.handleChange}\n        />\n        <input\n          type="password"\n          name="password"\n          value={this.state.password}\n          onChange={this.handleChange}\n        />\n        <button type="submit">Sign In</button>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<LoginForm />);\n')),(0,o.kt)("h2",{id:"controlling-other-types-of-html-form-elements"},"Controlling other Types of HTML Form Elements"),(0,o.kt)("p",null,"The following example of a contact us form demonstrates how controlling other HTML form fields such as: ",(0,o.kt)("inlineCode",{parentName:"p"},"<select>"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"textarea"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"<input type='checkbox'>")," is very similar to how we work with an ",(0,o.kt)("inlineCode",{parentName:"p"},"<input>"),"."),(0,o.kt)("h3",{id:"function-component-example-1"},"Function Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'function ContactUsForm() {\n  const [department, setDepartment] = React.useState(\'\');\n  const [message, setMessage] = React.useState(\'\');\n  const [agreedToTerms, setAgreedToTerms] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    console.log(\'submitting\', stateToString());\n  }\n\n  function stateToString() {\n    return JSON.stringify(\n      {\n        department,\n        message,\n        agreedToTerms,\n      },\n      null,\n      \' \'\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <select\n        name="department"\n        value={department}\n        onChange={(e) => setDepartment(e.target.value)}\n      >\n        <option value="">Select...</option>\n        <option value="hr">Human Resources</option>\n        <option value="pr">Public Relations</option>\n        <option value="support">Support</option>\n      </select>\n      <br />\n      <br />\n      <textarea\n        name="message"\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        cols="30"\n        rows="10"\n      />\n      <br />\n      <input\n        type="checkbox"\n        name="agreedToTerms"\n        checked={agreedToTerms}\n        onChange={(e) => setAgreedToTerms(e.target.checked)}\n      />\n      I agree to the terms and conditions.\n      <br />\n      <button>Send</button>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<ContactUsForm />);\n')),(0,o.kt)("h3",{id:"class-component-example-1"},"Class Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'class ContactUsForm extends React.Component {\n  state = {\n    department: \'\',\n    message: \'\',\n    agreedToTerms: false,\n  };\n\n  handleChange = (event) => {\n    const { type, name, value, checked } = event.target;\n    const updatedValue = type === \'checkbox\' ? checked : value;\n    this.setState({ [name]: updatedValue });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(this.state);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <select\n          name="department"\n          value={this.state.department}\n          onChange={this.handleChange}\n        >\n          <option value="">Select...</option>\n          <option value="hr">Human Resources</option>\n          <option value="pr">Public Relations</option>\n          <option value="support">Support</option>\n        </select>\n        <br />\n        <br />\n        <textarea\n          name="message"\n          value={this.state.message}\n          onChange={this.handleChange}\n          cols="30"\n          rows="10"\n        />\n        <br />\n        <input\n          type="checkbox"\n          name="agreedToTerms"\n          checked={this.state.agreedToTerms}\n          onChange={this.handleChange}\n        />\n        I agree to the terms and conditions.\n        <br />\n        <button>Send</button>\n        <pre>{JSON.stringify(this.state, null, \' \')}</pre>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<ContactUsForm />);\n')),(0,o.kt)("p",null,"Notice that although these HTML form fields set their value differently:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<textarea>value goes here<textarea>")),(0,o.kt)("li",{parentName:"ul"},"The option with ",(0,o.kt)("inlineCode",{parentName:"li"},"selected")," is selected.",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<select name="department">\n  <option value="">Select...</option>\n  <option value="hr">Human Resources</option>\n  <option selected value="pr">Public Relations</option>\n  <option value="support">Support</option>\n</select>\n'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<input type='checkbox' checked=checked>"))),(0,o.kt)("p",null,"These have all been standardized to be set using the value property when using React."),(0,o.kt)("h2",{id:"validation"},"Validation"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Validation of forms is something you can do in plain vanilla JavaScript."),(0,o.kt)("li",{parentName:"ul"},"Validating user input is not even discussed in the React documentation."),(0,o.kt)("li",{parentName:"ul"},"There are no specific features in React for validating forms."),(0,o.kt)("li",{parentName:"ul"},"React leaves this to job for external libraries."),(0,o.kt)("li",{parentName:"ul"},"Historically, the most popular React form validation library is ",(0,o.kt)("a",{parentName:"li",href:"https://jaredpalmer.com/formik/"},"Formik"),"."),(0,o.kt)("li",{parentName:"ul"},"More recently, the React form validation library ",(0,o.kt)("a",{parentName:"li",href:"https://react-hook-form.com/"},"React Hook Form")," has caught up to Formik and will likely soon pass it in popularity. If you are starting a new project a would recommend this library as it has better accessibility support."),(0,o.kt)("li",{parentName:"ul"},"Here is a discussion on reddit of whether a ",(0,o.kt)("a",{parentName:"li",href:"https://www.reddit.com/r/reactjs/comments/5u66ce/necessary_to_use_a_form_library_in_react/"},"Form Library is Necessary in React"))),(0,o.kt)("p",null,"To help you decide whether a library would be helpful in your use case, it can be helpful to manually implement form validation at first in your React application."),(0,o.kt)("p",null,"Below is an example of some basic validation implemented in our Contact Us form."),(0,o.kt)("h3",{id:"validation-with-function-component--hooks"},"Validation (with Function Component & Hooks)"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create the file ",(0,o.kt)("inlineCode",{parentName:"li"},"styles.css")),(0,o.kt)("li",{parentName:"ol"},"Add the following styles:")),(0,o.kt)("h4",{id:"stylescss"},"styles.css"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},".alert {\n  padding: 20px;\n  background-color: #f44336;\n  color: white;\n  width: 50%;\n}\n")),(0,o.kt)("h4",{id:"indexhtml"},"index.html"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Demos</title>\n+    <link rel="stylesheet" href="/styles.css" />\n  </head>\n...\n')),(0,o.kt)("h4",{id:"mainjs"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'function ContactUsForm() {\n  const [department, setDepartment] = React.useState(\'\');\n  const [message, setMessage] = React.useState(\'\');\n  const [agreedToTerms, setAgreedToTerms] = React.useState(false);\n\n  const [departmentError, setDepartmentError] = React.useState(null);\n  const [messageError, setMessageError] = React.useState(null);\n  const [agreedToTermsError, setAgreedToTermsError] = React.useState(null);\n\n  const [departmentTouched, setDepartmentTouched] = React.useState(false);\n  const [messageTouched, setMessageTouched] = React.useState(false);\n  const [agreedToTermsTouched, setAgreedToTermsTouched] = React.useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    const isValid = !departmentError && !messageError && !agreedToTermsError;\n    if (!isValid) {\n      return;\n    }\n    console.log(\'submitting\', { department, message, agreedToTerms });\n  }\n\n  React.useEffect(() => {\n    validate();\n  }, [department, message, agreedToTerms]);\n\n  function validate() {\n    setDepartmentError(null);\n    setMessageError(null);\n    setAgreedToTermsError(null);\n    if (department === \'\') {\n      setDepartmentError(\'Department is required.\');\n    }\n    if (message === \'\') {\n      setMessageError(\'Message is required.\');\n    }\n    if (agreedToTerms === false) {\n      setAgreedToTermsError(\'You must agree to the terms and conditions.\');\n    }\n  }\n\n  function stateToString() {\n    return JSON.stringify(\n      {\n        values: { department, message, agreedToTerms },\n        errors: { departmentError, messageError, agreedToTermsError },\n        touched: { departmentTouched, messageTouched, agreedToTermsTouched },\n      },\n      null,\n      \' \'\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <select\n        name="department"\n        value={department}\n        onChange={(e) => setDepartment(e.target.value)}\n        onBlur={(e) => setDepartmentTouched(true)}\n      >\n        <option value="">Select...</option>\n        <option value="hr">Human Resources</option>\n        <option value="pr">Public Relations</option>\n        <option value="support">Support</option>\n      </select>\n      <br />\n      {departmentError && departmentTouched && (\n        <p className="alert">{departmentError}</p>\n      )}\n      <br />\n      <textarea\n        name="message"\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        onBlur={(e) => setMessageTouched(true)}\n        cols="30"\n        rows="10"\n      />\n      <br />\n      {messageError && messageTouched && (\n        <p className="alert">{messageError}</p>\n      )}\n      <input\n        type="checkbox"\n        name="agreedToTerms"\n        checked={agreedToTerms}\n        onChange={(e) => setAgreedToTerms(e.target.checked)}\n        onBlur={(e) => setAgreedToTermsTouched(true)}\n      />\n      I agree to the terms and conditions.\n      <br />\n      {agreedToTermsError && agreedToTermsTouched && (\n        <p className="alert">{agreedToTermsError}</p>\n      )}\n      <button>Send</button>\n      <pre>{stateToString()}</pre>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<ContactUsForm />);\n')),(0,o.kt)("p",null,"Some things to notice in the code above:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Validation messages are themselves local component state."),(0,o.kt)("li",{parentName:"ul"},"The validations are called when the form is submitted."),(0,o.kt)("li",{parentName:"ul"},"The && operator is used to conditionally display the error messages.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"The && operator is ideal in this case since there is no else case.")))),(0,o.kt)("h3",{id:"validation-in-a-class-component"},"Validation (in a Class Component)"),(0,o.kt)("h4",{id:"mainjs-1"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'class ContactUsForm extends React.Component {\n  state = {\n    department: \'\',\n    message: \'\',\n    agreedToTerms: false,\n    departmentValidationMessage: null,\n    messageValidationMessage: null,\n    agreedToTermsValidationMessage: null,\n  };\n\n  handleChange = (event) => {\n    const { type, name, value, checked } = event.target;\n    const updatedValue = type === \'checkbox\' ? checked : value;\n    this.setState({ [name]: updatedValue });\n  };\n\n  handleBlur = (event) => {\n    this.validate();\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.validate();\n    if (!this.isValid()) {\n      return;\n    }\n    console.log(this.state);\n  };\n\n  isValid = () => {\n    const {\n      departmentValidationMessage,\n      messageValidationMessage,\n      agreedToTermsValidationMessage,\n    } = this.state;\n    return (\n      departmentValidationMessage === null &&\n      messageValidationMessage === null &&\n      agreedToTermsValidationMessage === null\n    );\n  };\n\n  validate() {\n    const { department, message, agreedToTerms } = this.state;\n    this.setState({\n      departmentValidationMessage: null,\n      messageValidationMessage: null,\n      agreedToTermsValidationMessage: null,\n    });\n    if (!department) {\n      this.setState({ departmentValidationMessage: \'Department is required.\' });\n    }\n    if (!message) {\n      this.setState({ messageValidationMessage: \'A message is required.\' });\n    }\n    if (agreedToTerms === false) {\n      this.setState({\n        agreedToTermsValidationMessage:\n          \'You must agree to the terms and conditions.\',\n      });\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <select\n          name="department"\n          value={this.state.department}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n        >\n          <option value="">Select...</option>\n          <option value="hr">Human Resources</option>\n          <option value="pr">Public Relations</option>\n          <option value="support">Support</option>\n        </select>\n        <br />\n        {this.state.departmentValidationMessage && (\n          <p className="alert">{this.state.departmentValidationMessage}</p>\n        )}\n        <br />\n        <textarea\n          name="message"\n          value={this.state.message}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          cols="30"\n          rows="10"\n        />\n        <br />\n        {this.state.messageValidationMessage && (\n          <p className="alert">{this.state.messageValidationMessage}</p>\n        )}\n        <input\n          type="checkbox"\n          name="agreedToTerms"\n          checked={this.state.agreedToTerms}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n        />\n        I agree to the terms and conditions.\n        <br />\n        {this.state.agreedToTermsValidationMessage && (\n          <p className="alert">{this.state.agreedToTermsValidationMessage}</p>\n        )}\n        <button>Send</button>\n        <pre>{JSON.stringify(this.state, null, \' \')}</pre>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<ContactUsForm />);\n')),(0,o.kt)("h2",{id:"uncontrolled-components"},"Uncontrolled Components"),(0,o.kt)("p",null,"In most cases, React recommends using ",(0,o.kt)("inlineCode",{parentName:"p"},"controlled components")," to implement forms. In a controlled component, form data is handled by a React component. The alternative is ",(0,o.kt)("inlineCode",{parentName:"p"},"uncontrolled components"),", where form data is handled by the ",(0,o.kt)("inlineCode",{parentName:"p"},"DOM")," itself."),(0,o.kt)("h3",{id:"refs"},"Refs"),(0,o.kt)("p",null,"When writing an ",(0,o.kt)("inlineCode",{parentName:"p"},"uncontrolled component")," you use a ",(0,o.kt)("inlineCode",{parentName:"p"},"ref")," to get form values from the DOM directly instead of writing an event handler for every state update."),(0,o.kt)("h3",{id:"function-component-example-2"},"Function Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ExampleForm() {\n  const inputRef = React.useRef();\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(inputRef.current);\n    console.log(inputRef.current.value);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type=\"text\" ref={inputRef} />\n      <button>Submit</button>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<ExampleForm />);\n")),(0,o.kt)("h4",{id:"setting-defaultvalue"},"Setting defaultValue"),(0,o.kt)("p",null,"Try initializing the value property on the input."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Modify the code to set the ",(0,o.kt)("inlineCode",{parentName:"li"},"value")," property",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},' <form onSubmit={handleSubmit}>\n     <input\n+       value="initial value"\n       type="text" ref={inputRef} />\n     <button>Submit</button>\n </form>\n'))),(0,o.kt)("li",{parentName:"ol"},"Refresh the page"),(0,o.kt)("li",{parentName:"ol"},"This warning is displayed and the input will be read-only:",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Warning: Failed prop type: You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.\n"))),(0,o.kt)("li",{parentName:"ol"},"As the warning explains change the code to use defaultValue",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<form onSubmit={handleSubmit}>\n    <input\n+       defaultValue="initial value"\n      type="text" ref={inputRef} />\n    <button>Submit</button>\n</form>\n'))),(0,o.kt)("li",{parentName:"ol"},"Refresh the page"),(0,o.kt)("li",{parentName:"ol"},"The warning goes away")),(0,o.kt)("blockquote",null,(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("inlineCode",{parentName:"li"},"defaultValue")," to initialize ",(0,o.kt)("inlineCode",{parentName:"li"},"uncontrolled components")),(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("inlineCode",{parentName:"li"},"value")," to initialize ",(0,o.kt)("inlineCode",{parentName:"li"},"controlled components")))),(0,o.kt)("h3",{id:"class-component-example-2"},"Class Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"class ExampleForm extends React.Component {\n  inputRef = React.createRef();\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(this.inputRef.current);\n    console.log(this.inputRef.current.value);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"text\" ref={this.inputRef} />\n        <button>Submit</button>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<ExampleForm />);\n")),(0,o.kt)("h3",{id:"file-input-example"},"File Input Example"),(0,o.kt)("p",null,"In HTML, an ",(0,o.kt)("inlineCode",{parentName:"p"},'<input type="file">')," lets the user choose one or more files from their device storage to be uploaded to a server or manipulated by JavaScript via the File API."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<input type="file" />\n')),(0,o.kt)("p",null,"In React, an ",(0,o.kt)("inlineCode",{parentName:"p"},'<input type="file" />')," is always an uncontrolled component because its value can only be set by a user, and not programmatically."),(0,o.kt)("p",null,"You should use the File API to interact with the files. The following example shows how to create a ref to the DOM node to access file(s) in a submit handler:"),(0,o.kt)("h4",{id:"function-component-example-3"},"Function Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const { useRef } = React;\n\nfunction FileInput() {\n  const fileInput = useRef();\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    console.log(fileInput.current);\n    if (!fileInput) return;\n    alert(`Selected file - ${fileInput.current.files[0].name}`);\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Upload file:\n        <input type="file" ref={fileInput} />\n      </label>\n      <br />\n      <button type="submit">Submit</button>\n    </form>\n  );\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<FileInput />);\n')),(0,o.kt)("h4",{id:"class-component-example-3"},"Class Component Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'class FileInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.fileInput = React.createRef();\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    alert(`Selected file - ${this.fileInput.current.files[0].name}`);\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Upload file:\n          <input type="file" ref={this.fileInput} />\n        </label>\n        <br />\n        <button type="submit">Submit</button>\n      </form>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<FileInput />);\n')),(0,o.kt)("p",null,"See the reference links below for a more complete example of a file upload component in React."),(0,o.kt)("h2",{id:"items-app-demo-crud-continued"},"Items App Demo (CRUD) (continued)"),(0,o.kt)("p",null,"Below we continue to expand on the Items (CRUD) Demo to use forms and do additional component communication. See the requirements listed below as well as the solution code."),(0,o.kt)("h3",{id:"requirements"},"Requirements"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Implement the feature to add an item",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"create a Form component"),(0,o.kt)("li",{parentName:"ul"},"Add a text input and button to it"),(0,o.kt)("li",{parentName:"ul"},"render the Form in the Container by adding it above the list",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Note: since render needs to return one parent element you will need to wrap ",(0,o.kt)("inlineCode",{parentName:"li"},"<Form>")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"<List>")," in an outer ",(0,o.kt)("inlineCode",{parentName:"li"},"<div>")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"<React.Fragment>")))),(0,o.kt)("li",{parentName:"ul"},"read the value from the input when you click the add button"))),(0,o.kt)("li",{parentName:"ol"},"Add a feature to update an item inline")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Add an edit button to each item in the list"),(0,o.kt)("li",{parentName:"ul"},"Display an input and a button inline in place of the item when they click edit"),(0,o.kt)("li",{parentName:"ul"},"Save the update back into state in the app component")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Add a cancel link and use it to cancel out of editing mode.\nSee the finished solution code below:")),(0,o.kt)("h3",{id:"solution-using-function-components--hooks"},"Solution (using Function Components & Hooks)"),(0,o.kt)("p",null,"At this point, we are not calling an API yet we are just working with in-memory data but we will get to that next."),(0,o.kt)("h4",{id:"stylescss-1"},"styles.css"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},"body,\nbutton,\ninput,\ntextarea,\nli {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 1em;\n}\n\nli {\n  list-style: none;\n  border-bottom: 1px solid #ddd;\n  padding: 0.25rem;\n}\n\nspan {\n  margin: 15px;\n}\n\nbutton {\n  margin: 10px;\n  padding: 5px 15px 5px 15px;\n  background: transparent;\n}\n\nform {\n  margin: 15px;\n}\n\ninput {\n  border: 1px solid darkgray;\n}\n\nhtml {\n  font-size: large;\n}\n\nh2 {\n  font-size: x-large;\n  padding-bottom: 1rem;\n}\n\nh3 {\n  font-size: large;\n  padding-bottom: 1rem;\n}\n\n.alert {\n  padding: 20px;\n  background-color: #f44336;\n  color: white;\n  width: 50%;\n}\n")),(0,o.kt)("h4",{id:"indexhtml-1"},"index.html"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Demos</title>\n+    <link rel="stylesheet" href="/styles.css" />\n  </head>\n...\n')),(0,o.kt)("h4",{id:"mainjs-2"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ID() {\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\nclass Item {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n}\n\nconst initialItems = [\n  new Item(ID(), 'First Item'),\n  new Item(ID(), 'Second Item'),\n  new Item(ID(), 'Third Item'),\n];\n\nfunction ListItem({ item, onEdit, onRemove }) {\n  return (\n    <p>\n      <span>{item.name}</span>\n      <button onClick={() => onEdit(item)}>Edit</button>\n      <button onClick={() => onRemove(item)}>Remove</button>\n    </p>\n  );\n}\n\nfunction List({ items, onRemove, onUpdate }) {\n  const [editingItem, setEditingItem] = React.useState(null);\n\n  const handleEdit = (item) => {\n    setEditingItem(item);\n  };\n\n  const handleCancel = () => {\n    setEditingItem(null);\n  };\n\n  return (\n    <ul>\n      {items.map((item) => (\n        <li key={item.id}>\n          {item === editingItem ? (\n            <Form item={item} onSubmit={onUpdate} onCancel={handleCancel} />\n          ) : (\n            <ListItem item={item} onEdit={handleEdit} onRemove={onRemove} />\n          )}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nfunction Form({ item, onSubmit, onCancel, buttonValue }) {\n  const [inputValue, setInputValue] = React.useState(item.name || '');\n\n  const handleChange = (event) => {\n    event.preventDefault();\n    setInputValue(event.target.value);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    const submittedItem = {\n      id: item ? item.id : ID(),\n      name: inputValue,\n    };\n\n    onSubmit(submittedItem);\n    setInputValue('');\n  };\n\n  const handleCancel = (event) => {\n    event.preventDefault();\n    onCancel();\n  };\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <input value={inputValue} onChange={handleChange} />\n      <button>{buttonValue || 'Save'}</button>\n      {onCancel && (\n        <a href=\"#\" onClick={handleCancel}>\n          cancel\n        </a>\n      )}\n    </form>\n  );\n}\n\nfunction Container() {\n  const [items, setItems] = React.useState([]);\n\n  React.useEffect(() => setItems(initialItems), []);\n\n  const addItem = (item) => {\n    setItems([...items, item]);\n  };\n\n  const updateItem = (updatedItem) => {\n    let updatedItems = items.map((item) => {\n      return item.id === updatedItem.id\n        ? Object.assign({}, item, updatedItem)\n        : item;\n    });\n    return setItems(updatedItems);\n  };\n\n  const removeItem = (removeThisItem) => {\n    const filteredItems = items.filter((item) => item.id != removeThisItem.id);\n    setItems(filteredItems);\n  };\n\n  return (\n    <React.Fragment>\n      <Form item=\"\" onSubmit={addItem} buttonValue=\"Add\" />\n      <List items={items} onRemove={removeItem} onUpdate={updateItem} />\n    </React.Fragment>\n  );\n}\n\nfunction App() {\n  return (\n    <div>\n      <Container />\n    </div>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,o.kt)("h3",{id:"solution-using-class-components"},"Solution (using Class Components)"),(0,o.kt)("h4",{id:"stylescss-2"},"styles.css"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},"body,\nbutton,\ninput,\ntextarea,\nli {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 1em;\n}\n\nli {\n  list-style: none;\n  border-bottom: 1px solid #ddd;\n}\n\nspan {\n  margin: 15px;\n}\n\nbutton {\n  margin: 10px;\n  padding: 5px 15px 5px 15px;\n  background: transparent;\n}\n\nform {\n  margin: 15px;\n}\n")),(0,o.kt)("h4",{id:"indexhtml-2"},"index.html"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Demos</title>\n+    <link rel="stylesheet" href="styles.css" />\n  </head>\n...\n')),(0,o.kt)("h4",{id:"mainjs-3"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ID() {\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\nclass Item {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n}\n\nconst initialItems = [\n  new Item(ID(), 'First Item'),\n  new Item(ID(), 'Second Item'),\n  new Item(ID(), 'Third Item'),\n];\n\nclass ListItem extends React.Component {\n  render() {\n    const { item, onEdit, onRemove } = this.props;\n    return (\n      <p>\n        <span>{item.name}</span>\n        <button onClick={() => onEdit(item)}>Edit</button>\n        <button onClick={() => onRemove(item)}>Remove</button>\n      </p>\n    );\n  }\n}\nclass List extends React.Component {\n  state = {\n    editingItem: null,\n  };\n\n  handleEditClick = (item) => {\n    this.setState({ editingItem: item });\n  };\n\n  handleCancel = (item) => {\n    this.setState({ editingItem: null });\n  };\n\n  render() {\n    const { items, onRemove, onUpdate } = this.props;\n    return (\n      <ul>\n        {items.map((item) => (\n          <li key={item.id}>\n            {item === this.state.editingItem ? (\n              <Form\n                item={item}\n                onSubmit={onUpdate}\n                onCancel={this.handleCancel}\n              />\n            ) : (\n              <ListItem\n                item={item}\n                onEdit={this.handleEditClick}\n                onRemove={onRemove}\n              />\n            )}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nclass Form extends React.Component {\n  state = {\n    inputValue: this.props.item.name || '',\n  };\n\n  handleChange = (event) => {\n    event.preventDefault();\n    this.setState({ inputValue: event.target.value });\n  };\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const item = {\n      id: this.props.item ? this.props.item.id : ID(),\n      name: this.state.inputValue,\n    };\n\n    this.props.onSubmit(item);\n    this.setState({ inputValue: '' });\n  };\n\n  handleCancel = (event) => {\n    event.preventDefault();\n    this.props.onCancel();\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleFormSubmit}>\n        <input value={this.state.inputValue} onChange={this.handleChange} />\n        <button>{this.props.buttonValue || 'Save'}</button>\n        {this.props.onCancel && (\n          <a href=\"#\" onClick={this.handleCancel}>\n            cancel\n          </a>\n        )}\n      </form>\n    );\n  }\n}\n\nclass Container extends React.Component {\n  state = {\n    items: [],\n  };\n\n  componentDidMount() {\n    this.setState({ items: initialItems });\n  }\n\n  addItem = (item) => {\n    this.setState((state) => ({ items: [...state.items, item] }));\n  };\n\n  updateItem = (updatedItem) => {\n    this.setState((state) => {\n      let items = state.items.map((item) => {\n        return item.id === updatedItem.id\n          ? Object.assign({}, item, updatedItem)\n          : item;\n      });\n      return { items };\n    });\n  };\n\n  removeItem = (removeThisItem) => {\n    this.setState((state) => {\n      const items = state.items.filter((item) => item.id != removeThisItem.id);\n      return { items };\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Form item=\"\" onSubmit={this.addItem} buttonValue=\"Add\" />\n        <List\n          items={this.state.items}\n          onRemove={this.removeItem}\n          onUpdate={this.updateItem}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Container />\n      </div>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,o.kt)("h2",{id:"reference"},"Reference"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/forms.html"},"Forms: React Documentation")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/uncontrolled-components.html"},"Uncontrolled Components: React Documentation")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://medium.com/front-end-weekly/react-quick-tip-easy-data-binding-with-a-generic-onchange-handler-fb0254a7094e"},"Generic Change Handler")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://learnetto.com/blog/how-to-do-simple-form-validation-in-reactjs"},"Simple Validation")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.reddit.com/r/reactjs/comments/5u66ce/necessary_to_use_a_form_library_in_react/"},"Is a Form Library Necessary: Discussion")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.telerik.com/blogs/up-and-running-with-react-form-validation"},"Form Validation Example")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://moduscreate.com/blog/reactjs-form-validation-approaches/"},"Form Validation Approaches")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://codeburst.io/react-image-upload-with-kittens-cc96430eaece"},"File upload"))))}d.isMDXComponent=!0}}]);