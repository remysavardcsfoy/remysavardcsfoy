"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[8905],{3905:(e,n,t)=>{t.d(n,{Zo:()=>h,kt:()=>m});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},h=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),c=p(t),d=o,m=c["".concat(l,".").concat(d)]||c[d]||u[d]||a;return t?r.createElement(m,s(s({ref:n},h),{},{components:t})):r.createElement(m,s({ref:n},h))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=t[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1864:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var r=t(7462),o=(t(7294),t(3905));const a={title:"HTTP",sidebar_label:"HTTP",slug:"/http"},s=void 0,i={unversionedId:"HTTP",id:"HTTP",title:"HTTP",description:"The ability to make HTTP calls is not built-in to React.",source:"@site/docs/14-HTTP.md",sourceDirName:".",slug:"/http",permalink:"/docs/http",draft:!1,tags:[],version:"current",sidebarPosition:14,frontMatter:{title:"HTTP",sidebar_label:"HTTP",slug:"/http"}},l={},p=[{value:"Setup Backend",id:"setup-backend",level:2},{value:"Axios",id:"axios",level:2},{value:"Fetch",id:"fetch",level:2},{value:"In React",id:"in-react",level:2},{value:"When to Load Data?",id:"when-to-load-data",level:3},{value:"Loading",id:"loading",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Lists",id:"lists",level:3},{value:"Function Component Example",id:"function-component-example",level:3},{value:"Class Component Example",id:"class-component-example",level:3},{value:"Reuse via API object",id:"reuse-via-api-object",level:3},{value:"Function Component Example with API Object",id:"function-component-example-with-api-object",level:3},{value:"Class Component Example with API Object",id:"class-component-example-with-api-object",level:3},{value:"Fetch Mutations",id:"fetch-mutations",level:2},{value:"POST with Fetch",id:"post-with-fetch",level:3},{value:"PUT with Fetch",id:"put-with-fetch",level:3},{value:"DELETE with Fetch",id:"delete-with-fetch",level:3},{value:"Axios Mutations",id:"axios-mutations",level:2},{value:"POST with Axios",id:"post-with-axios",level:3},{value:"Items Demo App (CRUD) using HTTP",id:"items-demo-app-crud-using-http",level:2},{value:"Function Component Example",id:"function-component-example-1",level:3},{value:"<code>apidb.json</code>",id:"apidbjson",level:4},{value:"styles.css",id:"stylescss",level:4},{value:"index.html",id:"indexhtml",level:4},{value:"main.js",id:"mainjs",level:4},{value:"Class Component Example",id:"class-component-example-1",level:3},{value:"<code>apidb.json</code>",id:"apidbjson-1",level:4},{value:"styles.css",id:"stylescss-1",level:4},{value:"index.html",id:"indexhtml-1",level:4},{value:"main.js",id:"mainjs-1",level:4}],h={toc:p},c="wrapper";function u(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,r.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The ability to make HTTP calls is not built-in to React."),(0,o.kt)("p",null,"React applications use one of the following to make ",(0,o.kt)("inlineCode",{parentName:"p"},"HTTP")," calls:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Axios")," library"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"fetch")," API (built-in to modern browsers)")),(0,o.kt)("h2",{id:"setup-backend"},"Setup Backend"),(0,o.kt)("p",null,"Before making HTTP calls we need to ",(0,o.kt)("a",{parentName:"p",href:"/docs/backend-api-setup"},"setup a backend following these directions"),"."),(0,o.kt)("h2",{id:"axios"},"Axios"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/axios/axios"},"axios")," library."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm install axios\n")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"Axios is a ",(0,o.kt)("inlineCode",{parentName:"p"},"Promise")," based HTTP client for the ",(0,o.kt)("inlineCode",{parentName:"p"},"browser")," and node.js."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add a script tag to the library in ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html"),"."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<!DOCTYPE html>\n<html lang="en">\n<head>\n    ...\n</head>\n<body>\n    <div id="root"></div>\n    ...\n    <script src="/node_modules/@babel/standalone/babel.min.js"><\/script>\n+   <script src="/node_modules/axios/dist/axios.js"><\/script>\n    <script type="text/babel" src="/main.js"><\/script>\n</body>\n</html>\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try the following code in ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js"),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const okUrl = 'http://localhost:3000/photos?_page=1&_limit=100';\nconst notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\nconst serverErrorUrl = 'https://httpstat.us/500';\n// const urls here\n\naxios\n  .get(okUrl)\n  .then((response) => response.data)\n  .then((data) => console.log(data));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Open the Chrome DevTools console and you should see the data being logged.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update the url to an endpoint that throws a server error and update the code to catch the error."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"}," // const urls here\n\naxios\n+ .get(serverErrorUrl)\n.then(response => response.data)\n.then(data => console.log(data))\n+ .catch(error => console.log(error));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should see the following logged in the console."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"VM599:1 GET https://httpstat.us/500 500 (Internal Server Error)\nError: Request failed with status code 500\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try these other urls that also return errors and verify they are logged."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\n")))),(0,o.kt)("h2",{id:"fetch"},"Fetch"),(0,o.kt)("p",null,"The fetch specification differs from ",(0,o.kt)("inlineCode",{parentName:"p"},"jQuery.ajax()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"axios")," in three main ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The entire response is returned instead of the JSON data being already parsed (deserialized) into a JavaScript object.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The Promise returned from fetch() won\u2019t reject on HTTP error status even if the response is an HTTP 404 or 500. Instead, it will resolve normally (with ok status set to false), and it will only reject on network failure or if anything prevented the request from completing."))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"By default, fetch won't send or receive any cookies from the server, resulting in unauthenticated requests if the site relies on maintaining a user session (to send cookies, the credentials init option must be set).")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Fetch API")," is now standard in modern browsers and does not require an additional install."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note that you will need to use a polyfill if you need to support IE browsers. See the ",(0,o.kt)("a",{parentName:"p",href:"https://caniuse.com/#feat=fetch"},"can I use feature page for fetch")," for more information. The most commonly used polyfill is ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/matthew-andrews/isomorphic-fetch"},"isomorphic-fetch"),".")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try the following code in ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js"),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// const urls here\nfetch(okUrl).then((response) => console.log(response));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Open the Chrome DevTools console and you should see the response object being logged. Notice that the body property is a readable stream object but you can't yet see the data.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update the code to read the body stream and parse the JSON in the body of the request into a JavaScript object."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// const urls here\n\nfetch(okUrl)\n  .then((response) => {\n    console.log(response);\n    return response;\n  })\n  .then((response) => response.json())\n  .then((data) => console.log(data));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the console you will see the response as well as the data (parsed body) begin logged.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update the url to an endpoint that throws a server error and update the code to catch the error."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"// const urls here\n\n+ fetch(serverErrorUrl)\n.then(response => {\nconsole.log(response);\nreturn response;\n})\n.then(response => response.json())\n.then(data => console.log(data));\n+ .catch(error => console.log(error));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should see the following logged in the console."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'GET https://httpstat.us/500 500 (Internal Server Error)\nResponse\xa0{type: "cors", url: "https://httpstat.us/500", redirected: false, status: 500, ok: false,\xa0\u2026}\nSyntaxError: Unexpected token I in JSON at position 4\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The catch caught an error thrown on the line shown below. The error occurred when parsing the json into a JavaScript object."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},".then(response => response.json());\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Remember, ",(0,o.kt)("inlineCode",{parentName:"p"},"fetch()")," won\u2019t reject on HTTP error status even if the response is an HTTP 404 or 500. Instead, it will resolve normally (with ok status set to false)")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To see this happening change .json() to .text()"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"- .then(response => response.json());\n+ then(response => response.text());\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should now see the error: ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")," being logged to the console."),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"The fetch API doesn't consider server errors to be an error, the request was made and a response was returned. The response just happened to include an error message in the body and that body is not of ",(0,o.kt)("inlineCode",{parentName:"p"},"content-type: application/json")," hence the error when attempt to parse it as ",(0,o.kt)("inlineCode",{parentName:"p"},"json"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Change .text() back to .json()"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"+ .then(response => response.json());\n- then(response => response.text());\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add the following code to treat a response with a status set to false as an error."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"},"// const urls here\n\nfetch(serverErrorUrl)\n.then(response => {\n    console.log(response);\n    return response;\n})\n+  .then(response => {\n+    if (!response.ok) throw new Error(response.statusText);\n+    return response;\n+ })\n.then(response => response.json())\n.then(data => console.log(data))\n.catch(error => console.log(error));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should again see the error: ",(0,o.kt)("inlineCode",{parentName:"p"},"Internal Server Error")," being logged to the console.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Now that we have things working we can remove the logging of the full response."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-diff"}," // const urls here\n\nfetch(serverErrorUrl)\n-   .then(response => {\n-       console.log(response);\n-       return response;\n-   })\n.then(response => {\n  if (!response.ok) throw new Error(response.statusText);\n  return response;\n})\n.then(response => response.json())\n.then(data => console.log(data))\n.catch(error => console.log(error));\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"We can also pull the logic to parse the JSON body and handle the error into reusable functions."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"}," // const urls here\n\nfetch(serverErrorUrl)\n  .then(response => {\n    console.log(response);\n    return response;\n  })\n-  .then(response => {\n-     if (!response.ok) throw new Error(response.statusText);\n-     return response;\n-   })\n+  .then(handleErrors)\n-  .then(response => response.json())\n+  .then(parseJSON)\n  .then(data => console.log(data))\n  .catch(error => console.log(error));\n\n+ function handleErrors(response) {\n+  if (!response.ok) throw new Error(response.statusText);\n+  return response;\n+ }\n\n+ function parseJSON(response) {\n+   return response.json();\n+ }\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try these other urls that also return errors and verify they are logged properly."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\n")))),(0,o.kt)("h2",{id:"in-react"},"In React"),(0,o.kt)("p",null,"Now that we understand the fundamental underlying concepts lets render this data in React."),(0,o.kt)("h3",{id:"when-to-load-data"},"When to Load Data?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"In a function component, you should make your AJAX calls in a ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," hook. When the data or the error returns you can use your set state updater function returned from ",(0,o.kt)("inlineCode",{parentName:"li"},"useState")," to update the state."),(0,o.kt)("li",{parentName:"ul"},"In a class component, you should make your AJAX calls in the ",(0,o.kt)("inlineCode",{parentName:"li"},"componentDidMount")," lifecycle method. This is so you can use ",(0,o.kt)("inlineCode",{parentName:"li"},"setState")," to update your component when the data is retrieved.")),(0,o.kt)("h3",{id:"loading"},"Loading"),(0,o.kt)("p",null,"Since AJAX calls don't always return immediately (they are asynchronous) it is common practice to show a loading indicator when the HTTP request is in flight."),(0,o.kt)("h3",{id:"error-handling"},"Error Handling"),(0,o.kt)("p",null,"If an error occurs while making the request or when it returns we need to either display that error or translate it to a more user friendly message and then display the error."),(0,o.kt)("p",null,"Initially, we'll just display the error from the server and then later we will see how to translate that error to something more user friendly."),(0,o.kt)("h3",{id:"lists"},"Lists"),(0,o.kt)("p",null,"If the data is returned successfully, we can use what we learned in the list section to display the data."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"! Remember we need to set a key on the list items.")),(0,o.kt)("h3",{id:"function-component-example"},"Function Component Example"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try the following code in ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const okUrl = 'http://localhost:3000/photos?_page=1&_limit=100';\nconst notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\nconst serverErrorUrl = 'https://httpstat.us/500';\n\nfunction PhotoList() {\n  const [loading, setLoading] = React.useState(false);\n  const [photos, setPhotos] = React.useState([]);\n  const [error, setError] = React.useState(null);\n\n  function toUserError(error) {\n    console.log('Call API to log the raw error. ', error);\n    return 'There was an error loading the photos.';\n  }\n\n  React.useEffect(() => {\n    setLoading(true);\n\n    fetch(okUrl)\n      .then((response) => {\n        if (!response.ok) throw new Error(response.statusText);\n        return response;\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        setError(null);\n        setPhotos(data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        const userError = toUserError(error);\n        setError(userError);\n        setLoading(false);\n      });\n  }, []);\n\n  if (error) {\n    return <div>{error}</div>;\n  } else if (loading) {\n    return <div>Loading...</div>;\n  } else {\n    return (\n      <ul>\n        {photos.map((photo) => {\n          return (\n            <li key={photo.id}>\n              <img src={photo.thumbnailUrl} alt={photo.title} />\n              <h3>{photo.title}</h3>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<PhotoList />);\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try these other urls that return errors and verify they are logged properly."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\nconst serverErrorUrl = 'https://httpstat.us/500';\n")))),(0,o.kt)("h3",{id:"class-component-example"},"Class Component Example"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try the following code in ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const okUrl = 'http://localhost:3000/photos?_page=1&_limit=100';\nconst notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\nconst serverErrorUrl = 'https://httpstat.us/500';\n\nclass PhotoList extends React.Component {\n  state = {\n    loading: false,\n    photos: [],\n    error: undefined,\n  };\n\n  componentDidMount() {\n    this.setState({ loading: true });\n\n    fetch(okUrl)\n      .then((response) => {\n        if (!response.ok) throw new Error(response.statusText);\n        return response;\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        this.setState({ photos: data, loading: false });\n      })\n      .catch((error) => {\n        const userError = this.toUserError(error);\n        this.setState({ error: userError, loading: false });\n      });\n  }\n\n  toUserError(error) {\n    console.log('Call API to log the raw error. ', error);\n    return 'There was an error loading the photos.';\n  }\n\n  render() {\n    const { loading, photos, error } = this.state;\n    if (error) {\n      return <div>{error}</div>;\n    } else if (loading) {\n      return <div>Loading...</div>;\n    } else {\n      return (\n        <ul>\n          {photos.map((photo) => {\n            return (\n              <li key={photo.id}>\n                <img src={photo.thumbnailUrl} alt={photo.title} />\n                <p>{photo.title}</p>\n              </li>\n            );\n          })}\n        </ul>\n      );\n    }\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<PhotoList />);\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Try these other urls that return errors and verify they are logged properly."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const notFoundErrorUrl = 'https://httpstat.us/404';\nconst forbiddenErrorUrl = 'https://httpstat.us/403';\nconst serverErrorUrl = 'https://httpstat.us/500';\n")))),(0,o.kt)("h3",{id:"reuse-via-api-object"},"Reuse via API object"),(0,o.kt)("p",null,"After you get comfortable using ",(0,o.kt)("inlineCode",{parentName:"p"},"Axios")," and/or the ",(0,o.kt)("inlineCode",{parentName:"p"},"fetch API")," and rendering the result in a React component, consider pulling the data access code into a reusable object. The benefit to doing this is that multiple components can make the same API call and convert to more user friendly error messages without repeating the code involved."),(0,o.kt)("p",null,"React is not very prescriptive about file names but their documentation does show these files being named with an API suffix (for example ProfileAPI.js)."),(0,o.kt)("p",null,"Review the examples below (using the fetch API). If time permits get the example running in ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js")),(0,o.kt)("h3",{id:"function-component-example-with-api-object"},"Function Component Example with API Object"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const baseUrl = 'http://localhost:3000';\nconst url = `${baseUrl}/photos`;\n\nfunction translateStatusToErrorMessage(status) {\n  switch (status) {\n    case 401:\n      return 'Please login again.';\n    case 403:\n      return 'You do not have permission to view the photos.';\n    default:\n      return 'There was an error retrieving the photos. Please try again.';\n  }\n}\n\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    const httpErrorInfo = {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.url,\n    };\n    console.log(\n      `logging http details for debugging: ${JSON.stringify(httpErrorInfo)}`\n    );\n\n    let errorMessage = translateStatusToErrorMessage(httpErrorInfo.status);\n    throw new Error(errorMessage);\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\nfunction delay(ms) {\n  return function (x) {\n    return new Promise((resolve) => setTimeout(() => resolve(x), ms));\n  };\n}\n\nconst photoAPI = {\n  getAll(page = 1, limit = 100) {\n    return (\n      fetch(`${url}?_page=${page}&_limit=${limit}`)\n        // .then(delay(600))\n        .then(checkStatus)\n        .then(parseJSON)\n        .catch((error) => {\n          let errorMessage = translateStatusToErrorMessage(error);\n          throw new Error(errorMessage);\n        })\n    );\n  },\n};\n\nfunction PhotoList() {\n  const [loading, setLoading] = React.useState(false);\n  const [photos, setPhotos] = React.useState([]);\n  const [error, setError] = React.useState(null);\n\n  React.useEffect(() => {\n    setLoading(true);\n    setError(null);\n\n    photoAPI\n      .getAll(1)\n      .then((data) => {\n        setPhotos(data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        setError(error.message);\n        setLoading(false);\n      });\n  }, []);\n\n  if (error) {\n    return <div>{error}</div>;\n  } else if (loading) {\n    return <div>Loading...</div>;\n  } else {\n    return (\n      <ul>\n        {photos.map((photo) => {\n          return (\n            <li key={photo.id}>\n              <img src={photo.thumbnailUrl} alt={photo.title} />\n              <h3>{photo.title}</h3>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<PhotoList />);\n")),(0,o.kt)("h3",{id:"class-component-example-with-api-object"},"Class Component Example with API Object"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const baseUrl = 'http://localhost:3000';\nconst url = `${baseUrl}/photos`;\n\nfunction translateStatusToErrorMessage(status) {\n  switch (status) {\n    case 401:\n      return 'Please login again.';\n    case 403:\n      return 'You do not have permission to view the photos.';\n    default:\n      return 'There was an error retrieving the photos. Please try again.';\n  }\n}\n\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    const httpErrorInfo = {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.url,\n    };\n    console.log(\n      `logging http details for debugging: ${JSON.stringify(httpErrorInfo)}`\n    );\n\n    let errorMessage = PhotoAPI.translateStatusToErrorMessage(\n      httpErrorInfo.status\n    );\n    throw new Error(errorMessage);\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\nfunction delay(ms) {\n  return function (x) {\n    return new Promise((resolve) => setTimeout(() => resolve(x), ms));\n  };\n}\n\nconst photoAPI = {\n  getAll(page = 1, limit = 100) {\n    return (\n      fetch(`${url}?_page=${page}&_limit=${limit}`)\n        // .then(delay(600))\n        .then(checkStatus)\n        .then(parseJSON)\n        .catch((error) => {\n          let errorMessage = translateStatusToErrorMessage(error);\n          throw new Error(errorMessage);\n        })\n    );\n  },\n};\n\nclass PhotoList extends React.Component {\n  state = {\n    loading: false,\n    photos: [],\n    error: undefined,\n  };\n\n  componentDidMount() {\n    this.setState({ loading: true });\n\n    photoAPI\n      .getAll(2)\n      .then((data) => {\n        this.setState({ photos: data, loading: false });\n      })\n      .catch((error) => {\n        this.setState({ error: error.message, loading: false });\n      });\n  }\n\n  render() {\n    const { loading, photos, error } = this.state;\n    if (loading) {\n      return <div>Loading...</div>;\n    } else if (error) {\n      return <div>{error}</div>;\n    } else {\n      return (\n        <ul>\n          {photos.map((photo) => {\n            return (\n              <li key={photo.id}>\n                <img src={photo.thumbnailUrl} alt={photo.title} />\n                <p>{photo.title}</p>\n              </li>\n            );\n          })}\n        </ul>\n      );\n    }\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<PhotoList />);\n")),(0,o.kt)("h2",{id:"fetch-mutations"},"Fetch Mutations"),(0,o.kt)("h3",{id:"post-with-fetch"},"POST with Fetch"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var url = 'http://localhost:3000/photos';\nvar data = {\n  albumId: 1,\n  title: 'Another Photo',\n  url: 'https://via.placeholder.com/600/b0f7cc',\n  thumbnailUrl: 'https://via.placeholder.com/150/b0f7cc',\n};\n\nfetch(url, {\n  method: 'POST',\n  body: JSON.stringify(data),\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n  .then((response) => {\n    console.log(response);\n    return response;\n  })\n  .then((response) => {\n    if (!response.ok) throw new Error(response.statusText);\n    return response;\n  })\n  .then((response) => response.json())\n  .then((response) => console.log('Success:', JSON.stringify(response)))\n  .catch((error) => console.error('Error:', error));\n")),(0,o.kt)("h3",{id:"put-with-fetch"},"PUT with Fetch"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var okUrl = 'http://localhost:3000/photos/5001';\nconst notFoundErrorUrl = 'http://localhost:3000/photos/10000000';\n\nvar data = {\n  title: 'Another Updated Photo',\n};\n\nfetch(notFoundErrorUrl, {\n  method: 'PUT',\n  body: JSON.stringify(data),\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n  .then((response) => {\n    if (!response.ok) throw new Error(response.statusText);\n    return response;\n  })\n  .then((response) => response.json())\n  .then((response) => console.log('Success:', JSON.stringify(response)))\n  .catch((error) => console.error('Error:', error));\n")),(0,o.kt)("h3",{id:"delete-with-fetch"},"DELETE with Fetch"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var okUrl = 'http://localhost:3000/photos/5001';\n\nfetch(okUrl, {\n  method: 'DELETE',\n})\n  .then((response) => {\n    console.log(response);\n    return response;\n  })\n  .then((response) => {\n    if (!response.ok) throw new Error(response.statusText);\n    return response;\n  })\n  .then((response) => response.json())\n  .then((response) => console.log('Success:', JSON.stringify(response)))\n  .catch((error) => console.error('Error:', error));\n")),(0,o.kt)("h2",{id:"axios-mutations"},"Axios Mutations"),(0,o.kt)("h3",{id:"post-with-axios"},"POST with Axios"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"axios({\n  method: 'post',\n  url: 'http://localhost:3000/photos',\n  data: {\n    albumId: 1,\n    title: 'New Photo',\n    url: 'https://via.placeholder.com/600/b0f7cc',\n    thumbnailUrl: 'https://via.placeholder.com/150/b0f7cc',\n  },\n})\n  .then((response) => response.data)\n  .then((photo) => console.log(photo))\n  .catch((error) => console.log(error));\n")),(0,o.kt)("h2",{id:"items-demo-app-crud-using-http"},"Items Demo App (CRUD) using HTTP"),(0,o.kt)("h3",{id:"function-component-example-1"},"Function Component Example"),(0,o.kt)("h4",{id:"apidbjson"},(0,o.kt)("inlineCode",{parentName:"h4"},"api\\db.json")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},',\n  "items": [\n    {"id": 1, "name": "First Item" },\n    {"id": 2, "name": "Second Item" },\n    {"id": 3, "name": "Third Item" }\n  ]\n')),(0,o.kt)("h4",{id:"stylescss"},"styles.css"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},"body,\nbutton,\ninput,\ntextarea,\nli {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 1em;\n}\n\nli {\n  list-style: none;\n  border-bottom: 1px solid #ddd;\n}\n\nspan {\n  margin: 15px;\n}\n\nbutton {\n  margin: 10px;\n  padding: 5px 15px 5px 15px;\n  background: transparent;\n}\n\nform {\n  margin: 15px;\n}\n")),(0,o.kt)("h4",{id:"indexhtml"},"index.html"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Demos</title>\n+    <link rel="stylesheet" href="/styles.css" />\n  </head>\n...\n')),(0,o.kt)("h4",{id:"mainjs"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ID() {\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\nfunction translateStatusToErrorMessage(status) {\n  switch (status) {\n    case 401:\n      return 'Please login again.';\n    case 403:\n      return 'You do not have permission to view the items.';\n    default:\n      return 'There was an error retrieving the items. Please try again.';\n  }\n}\n\n//pass translate in to make this more flexible\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    const httpErrorInfo = {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.url,\n    };\n    console.log(\n      `logging http details for debugging: ${JSON.stringify(httpErrorInfo)}`\n    );\n\n    let errorMessage = translateStatusToErrorMessage(httpErrorInfo.status);\n    throw new Error(errorMessage);\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\nclass Item {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n}\n\nconst baseUrl = 'http://localhost:3000';\nconst url = `${baseUrl}/items`;\n\n// API ----------\nconst itemAPI = {\n  getAll(page = 1, limit = 100) {\n    return fetch(`${url}?_page=${page}&_limit=${limit}`)\n      .then(checkStatus)\n      .then(parseJSON)\n      .catch((error) => {\n        let errorMessage = translateStatusToErrorMessage(error);\n        throw new Error(errorMessage);\n      });\n  },\n\n  add(item) {\n    return fetch(`${url}`, {\n      method: 'POST',\n      body: JSON.stringify(item),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n\n  update(item) {\n    return fetch(`${url}/${item.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(item),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n\n  delete(id) {\n    return fetch(`${url}/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n};\n\nfunction List(props) {\n  const { items, onRemove, onUpdate, loading, error } = props;\n  const [editingItem, setEditingItem] = React.useState(null);\n\n  const handleEditClick = (item) => {\n    setEditingItem(item);\n  };\n\n  const handleCancel = () => {\n    setEditingItem(null);\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  } else if (error) {\n    return <div>{error}</div>;\n  } else {\n    return (\n      <ul>\n        {items?.map((item) => (\n          <li key={item.id}>\n            {item === editingItem ? (\n              <Form item={item} onSubmit={onUpdate} onCancel={handleCancel} />\n            ) : (\n              <p>\n                <span>{item.name}</span>\n                <button onClick={() => handleEditClick(item)}>Edit</button>\n                <button onClick={() => onRemove(item)}>Remove</button>\n              </p>\n            )}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nfunction Form({ item, onSubmit, onCancel, buttonValue }) {\n  const [inputValue, setInputValue] = React.useState(item.name || '');\n\n  const handleChange = (event) => {\n    event.preventDefault();\n    setInputValue(event.target.value);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    const submittedItem = {\n      id: item ? item.id : ID(),\n      name: inputValue,\n    };\n\n    onSubmit(submittedItem);\n    setInputValue('');\n  };\n\n  const handleCancel = (event) => {\n    event.preventDefault();\n    onCancel();\n  };\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <input value={inputValue} onChange={handleChange} />\n      <button>{buttonValue || 'Save'}</button>\n      {onCancel && (\n        <a href=\"#\" onClick={handleCancel}>\n          cancel\n        </a>\n      )}\n    </form>\n  );\n}\n\nfunction Container() {\n  const [items, setItems] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState(undefined);\n\n  React.useEffect(() => {\n    setLoading(true);\n    itemAPI\n      .getAll(1)\n      .then((data) => {\n        setItems(data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        setError(error.message);\n        setLoading(false);\n      });\n  }, []);\n\n  const addItem = (item) => {\n    itemAPI\n      .add(item)\n      .then((newItem) => {\n        setItems([...items, newItem]);\n      })\n      .catch((error) => {\n        setError(error.message);\n      });\n  };\n\n  const updateItem = (updatedItem) => {\n    itemAPI\n      .update(updatedItem)\n      .then((data) => {\n        let updatedItems = items.map((item) => {\n          return item.id === updatedItem.id\n            ? Object.assign({}, item, data)\n            : item;\n        });\n        setItems(updatedItems);\n      })\n      .catch((error) => {\n        setError(error.message);\n      });\n  };\n\n  const removeItem = (removeThisItem) => {\n    itemAPI\n      .delete(removeThisItem.id)\n      .then(() => {\n        const filteredItems = items.filter(\n          (item) => item.id != removeThisItem.id\n        );\n        setItems(filteredItems);\n      })\n      .catch((error) => {\n        setError(error.message);\n      });\n  };\n\n  return (\n    <div>\n      <Form item=\"\" onSubmit={addItem} buttonValue=\"Add\" />\n      <List\n        loading={loading}\n        error={error}\n        items={items}\n        onRemove={removeItem}\n        onUpdate={updateItem}\n      />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <div>\n      <Container />\n    </div>\n  );\n}\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,o.kt)("h3",{id:"class-component-example-1"},"Class Component Example"),(0,o.kt)("h4",{id:"apidbjson-1"},(0,o.kt)("inlineCode",{parentName:"h4"},"api\\db.json")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},',\n  "items": [\n    {"id": 1, "name": "First Item" },\n    {"id": 2, "name": "Second Item" },\n    {"id": 3, "name": "Third Item" }\n  ]\n')),(0,o.kt)("h4",{id:"stylescss-1"},"styles.css"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},"body,\nbutton,\ninput,\ntextarea,\nli {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 1em;\n}\n\nli {\n  list-style: none;\n  border-bottom: 1px solid #ddd;\n}\n\nspan {\n  margin: 15px;\n}\n\nbutton {\n  margin: 10px;\n  padding: 5px 15px 5px 15px;\n  background: transparent;\n}\n\nform {\n  margin: 15px;\n}\n")),(0,o.kt)("h4",{id:"indexhtml-1"},"index.html"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-diff"},'<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Demos</title>\n+    <link rel="stylesheet" href="/styles.css" />\n  </head>\n...\n')),(0,o.kt)("h4",{id:"mainjs-1"},"main.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function ID() {\n  // Math.random should be unique because of its seeding algorithm.\n  // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n  // after the decimal.\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\nfunction translateStatusToErrorMessage(status) {\n  switch (status) {\n    case 401:\n      return 'Please login again.';\n    case 403:\n      return 'You do not have permission to view the items.';\n    default:\n      return 'There was an error retrieving the items. Please try again.';\n  }\n}\n\n//pass translate in to make this more flexible\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    const httpErrorInfo = {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.url,\n    };\n    console.log(\n      `logging http details for debugging: ${JSON.stringify(httpErrorInfo)}`\n    );\n\n    let errorMessage = ItemAPI.translateStatusToErrorMessage(\n      httpErrorInfo.status\n    );\n    throw new Error(errorMessage);\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\nclass Item {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n}\n\nconst baseUrl = 'http://localhost:3000';\nconst url = `${baseUrl}/items`;\n\n// API ----------\nconst itemAPI = {\n  getAll(page = 1, limit = 100) {\n    return fetch(`${url}?_page=${page}&_limit=${limit}`)\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n\n  add(item) {\n    return fetch(`${url}`, {\n      method: 'POST',\n      body: JSON.stringify(item),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n\n  update(item) {\n    return fetch(`${url}/${item.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(item),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n\n  delete(id) {\n    return fetch(`${url}/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(checkStatus)\n      .then(parseJSON);\n  },\n};\n\nclass List extends React.Component {\n  state = {\n    editingItem: null,\n  };\n\n  handleEditClick = (item) => {\n    this.setState({ editingItem: item });\n  };\n\n  handleCancel = (item) => {\n    this.setState({ editingItem: null });\n  };\n\n  render() {\n    const { items, onRemove, onUpdate, loading, error } = this.props;\n\n    if (loading) {\n      return <div>Loading...</div>;\n    } else if (error) {\n      return <div>{error}</div>;\n    } else {\n      return (\n        <ul>\n          {items.map((item) => (\n            <li key={item.id}>\n              {item === this.state.editingItem ? (\n                <Form\n                  item={item}\n                  onSubmit={onUpdate}\n                  onCancel={this.handleCancel}\n                />\n              ) : (\n                <p>\n                  <span>{item.name}</span>\n                  <button onClick={() => this.handleEditClick(item)}>\n                    Edit\n                  </button>\n                  <button onClick={() => onRemove(item)}>Remove</button>\n                </p>\n              )}\n            </li>\n          ))}\n        </ul>\n      );\n    }\n  }\n}\n\nclass Form extends React.Component {\n  state = {\n    inputValue: this.props.item.name || '',\n  };\n\n  handleChange = (event) => {\n    event.preventDefault();\n    this.setState({ inputValue: event.target.value });\n  };\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const item = {\n      id: this.props.item ? this.props.item.id : ID(),\n      name: this.state.inputValue,\n    };\n\n    this.props.onSubmit(item);\n    this.setState({ inputValue: '' });\n  };\n\n  handleCancel = (event) => {\n    event.preventDefault();\n    this.props.onCancel();\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleFormSubmit}>\n        <input value={this.state.inputValue} onChange={this.handleChange} />\n        <button>{this.props.buttonValue || 'Save'}</button>\n        {this.props.onCancel && (\n          <a href=\"#\" onClick={this.handleCancel}>\n            cancel\n          </a>\n        )}\n      </form>\n    );\n  }\n}\n\nclass Container extends React.Component {\n  state = {\n    loading: false,\n    items: [],\n    error: undefined,\n  };\n\n  componentDidMount() {\n    this.setState({ items: [], loading: true });\n    itemAPI\n      .getAll(1)\n      .then((data) => {\n        this.setState({ items: data, loading: false });\n      })\n      .catch((error) => {\n        this.setState({ error: error.message, loading: false });\n      });\n  }\n\n  addItem = (item) => {\n    itemAPI\n      .add(item)\n      .then((data) => {\n        this.setState((state) => ({\n          items: [...state.items, item],\n        }));\n      })\n      .catch((error) => {\n        this.setState({ error: error.message });\n      });\n  };\n\n  updateItem = (updatedItem) => {\n    itemAPI\n      .update(updatedItem)\n      .then((data) => {\n        this.setState((state) => {\n          let items = state.items.map((item) => {\n            return item.id === updatedItem.id\n              ? Object.assign({}, item, data)\n              : item;\n          });\n          return { items };\n        });\n      })\n      .catch((error) => {\n        this.setState({ error: error.message });\n      });\n  };\n\n  removeItem = (removeThisItem) => {\n    itemAPI\n      .delete(removeThisItem.id)\n      .then((data) => {\n        this.setState((state) => {\n          const items = state.items.filter(\n            (item) => item.id != removeThisItem.id\n          );\n          return { items };\n        });\n      })\n      .catch((error) => {\n        this.setState({ error: error.message });\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        <Form item=\"\" onSubmit={this.addItem} buttonValue=\"Add\" />\n        <List\n          loading={this.state.loading}\n          error={this.state.error}\n          items={this.state.items}\n          onRemove={this.removeItem}\n          onUpdate={this.updateItem}\n        />\n      </div>\n    );\n  }\n}\n\nclass App extends React.Component {\n  render() {\n    return <Container />;\n  }\n}\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,o.kt)("h1",{id:"resources"},"Resources"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://gist.github.com/jsjoeio/0fd8563bc23ef852bc921836512992d9"},"Comparison: Fetch vs Axios")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://medium.com/@thejasonfile/fetch-vs-axios-js-for-making-http-requests-2b261cdd3af5"},"Gotchas: Fetch vs Axios ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/typicode/json-server"},"JSON Server")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/faq-ajax.html"},"AJAX: React FAQ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch"},"Using Fetch")," -",(0,o.kt)("a",{parentName:"li",href:"https://mdn.github.io/fetch-examples/"},"Fetch Examples")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://medium.freecodecamp.org/a-practical-es6-guide-on-how-to-perform-http-requests-using-the-fetch-api-594c3d91a547"},"A Practical Guide to Using Fetch")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.tjvantoll.com/2015/09/13/fetch-and-errors/"},"Fetch & Errors")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://codeburst.io/how-to-call-api-in-a-smart-way-2ca572c6fe86"},"Reusable API Class Example")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/53332321/react-hook-warnings-for-async-function-in-useeffect-useeffect-function-must-ret"},"React Hook Warnings for async function in useEffect: useEffect function must return a cleanup function or nothing"))))}u.isMDXComponent=!0}}]);